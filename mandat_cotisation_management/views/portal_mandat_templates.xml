<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<template id="new_mandat">
		<t t-call="portal.portal_layout">
		<t t-set="additional_title">Nouvelle déclaration de formation</t>
		<form action="/mandat/new" method="post" enctype="multipart/form-data">
			<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
			<div class="row"
				style="background-color: #fff;margin-bottom:20px;margin-top:20px;font-family: 'Times New Roman'">
				<h2
					style="display: inline-block;border-top-left-radius: 6px;border-top-right-radius: 6px;margin: 0;padding: 0 20px;color: #fff;font-size: 14px;line-height: 40px;background:linear-gradient(150deg, #814747 20%, #630000 80%) !important">SOCIETES CONTROLEES</h2>
				<div class="col-xl-12">
				</div>

				<div class="form-group col-xl-6">
					<label class="col-form-label" for="secteur_activite">Secteur d'activité
					</label>
				</div>
				<div class="form-group col-xl-6">
					<select class="form-control" name="secteur_activite" t-att-readonly="None if state=='draft' else '1'">
						<t t-foreach="secteurs" t-as="secteur">
    						<option t-att-value="secteur[0]"><t t-esc="secteur[1]"/></option>
    					</t>
					</select>
				</div>

				<div class="form-group col-xl-6">
					<label class="col-form-label" for="forme_juridique">Forme juridique
					</label>
				</div>
				<div class="form-group col-xl-6">
				    <select class="form-control" name="forme_juridique" t-att-readonly="None if state=='draft' else '1'">
						<t t-foreach="formes" t-as="forme">
    						<option t-att-value="forme[0]"><t t-esc="forme[1]"/></option>
    					</t>
					</select>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="entite_ape">Entité APE
					</label>
				</div>
				<div class="form-group col-xl-6">
					<select class="form-control" name="entite_ape" t-att-readonly="None if state=='draft' else '1'">
						<option value="1">Oui</option>
						<option value="2">Non</option>
                    </select>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="in_group">Appartenance à un groupe
					</label>
				</div>
				<div class="form-group col-xl-6">
					<select class="form-control" name="in_group" t-att-readonly="None if state=='draft' else '1'">
						<option value="1">Oui</option>
						<option value="2">Non</option>
                    </select>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="nombre_autres_entite_groupe">Audit d'autres entités du groupe
					</label>
				</div>
				<div class="form-group col-xl-6">
				    <select class="form-control" name="nombre_autres_entite_groupe" t-att-readonly="None if state=='draft' else '1'">
						<option value="1">Oui</option>
						<option value="2">Non</option>
                    </select>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="capitaux_propres">Capitaux propres (KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="capitaux_propres" t-att-value="capitaux_propres or ''"
						class="form-control" id="capitaux_propres" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="resultat_exercice">Résultat de l'exercice
						(KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="resultat_exercice" t-att-value="resultat_exercice or ''"
						class="form-control" id="resultat_exercice" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="total_actif">Total Actif (KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="total_actif" t-att-value="total_actif or ''"
						class="form-control" id="total_actif" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="produit_exploitation">Produits
						d'exploitation(KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="produit_exploitation" t-att-value="produit_exploitation or ''"
						class="form-control" id="produit_exploitation" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="produit_financie">Produits financiers (KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="produit_financie" t-att-value="produit_financie or ''"
						class="form-control" id="produit_financie" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="leasing_restant">Leasign restant à payer
						(KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="leasing_restant" t-att-value="leasing_restant or ''"
						class="form-control" id="leasing_restant" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="honoraires_dernier_exercice_clos">Honoraires/dernier exercice
						clos (MAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="honoraires_dernier_exercice_clos"
						t-att-value="honoraires_dernier_exercice_clos or ''" class="form-control"
						id="honoraires_dernier_exercice_clos" t-att-readonly="None if state=='draft' else '1'"/>
				</div>
			</div>
			<div class="row"
				style="background-color: #fff;margin-bottom:20px;margin-top:20px;font-family: 'Times New Roman'">
				<h2
					style="display: inline-block;border-top-left-radius: 6px;border-top-right-radius: 6px;margin: 0;padding: 0 20px;color: #fff;font-size: 14px;line-height: 40px;background:linear-gradient(150deg, #814747 20%, #630000 80%) !important">MANDATS</h2>
				<div class="col-xl-12">
				</div>

				<div class="form-group col-xl-6">
					<label class="col-form-label" for="nature_mission">Nature de  la mission
					</label>
				</div>
				<div class="form-group col-xl-6">
					<select class="form-control" name="nature_mission" t-att-readonly="None if state=='draft' else '1'">
						<t t-foreach="natures" t-as="nature">
    						<option t-att-value="nature[0]"><t t-esc="nature[1]"/></option>
    					</t>
					</select>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="date_designation">Date de désignation
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="date" name="date_designation" t-att-value="date_designation or ''"
						class="form-control" id="date_designation" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="mode_designation">Mode de désignation (1)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="text" name="mode_designation" t-att-value="mode_designation or ''"
						class="form-control" id="mode_designation" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="exercces_couverts_par_le_mandat">Exercices couverts par le mandat
					</label>
				</div>
				<div class="form-group col-xl-6">
					<select class="form-control" name="exercices" t-att-readonly="None if state=='draft' else '1'" multiple="multiple">
						<option value="2021">2021</option>
						<option value="2022">2022</option>
						<option value="2023">2023</option>
                    </select>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="co_cac">Co-CAC
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="text" name="co_cac"
						t-att-value="co_cac or ''" class="form-control"
						id="co_cac" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="dernier_exercice_control">Dernier exercice contrôlé
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="text" name="dernier_exercice_control" t-att-value="dernier_exercice_control or ''"
						class="form-control" id="dernier_exercice_control" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="nombre_reserves_pour_limitation">Nombre de réserves pour limitations
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="nombre_reserves_pour_limitation" t-att-value="nombre_reserves_pour_limitation or ''"
						class="form-control" id="nombre_reserves_pour_limitation" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="nombre_reserves_pour_incertitudes">Nombre de réserves pour incertitudes
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="nombre_reserves_pour_incertitudes" t-att-value="nombre_reserves_pour_incertitudes or ''"
						class="form-control" id="nombre_reserves_pour_incertitudes" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="nombre_reserves_pour_desacord">Nombre de réserves pour désaccord
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="nombre_reserves_pour_desacord" t-att-value="nombre_reserves_pour_desacord or ''"
						class="form-control" id="nombre_reserves_pour_desacord" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="nombre_observation">Nombre d'observations
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="nombre_observation" t-att-value="nombre_observation or ''"
						class="form-control" id="nombre_observation" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="associe_signataire">Associé signataire
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="text" name="associe_signataire" t-att-value="associe_signataire or ''"
						class="form-control" id="associe_signataire" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


			</div>
			<div class="row"
				style="background-color: #fff;margin-bottom:20px;margin-top:20px;font-family: 'Times New Roman'">
				<h2
					style="display: inline-block;border-top-left-radius: 6px;border-top-right-radius: 6px;margin: 0;padding: 0 20px;color: #fff;font-size: 14px;line-height: 40px;background:linear-gradient(150deg, #814747 20%, #630000 80%) !important">TEMPS ET RAPPORTS</h2>
				<div class="col-xl-12">
				</div>

				<div class="form-group col-xl-6">
					<label class="col-form-label" for="budget_temps_selon_norme">Budget temps selon Norme
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="budget_temps_selon_norme" t-att-value="budget_temps_selon_norme or ''"
						class="form-control" id="budget_temps_selon_norme" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="budget_retenu_effort">Budget retenu lors de l'offre (2)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="budget_retenu_effort" t-att-value="budget_retenu_effort or ''"
						class="form-control" id="budget_retenu_effort" t-att-readonly="None if state=='draft' else '1'"/>
				</div>
                
                <div class="form-group col-xl-6" id="lettre_information">
                    <label class="col-form-label" style="margin-top: 20px;" for="join_report_2">Joindre la lettre d'information <span t-if="justif_ca" style="color:blue">(Document déjà chargé)</span></label>
                </div>
                <div class="form-group col-xl-6" data-type="binary" id="lettre_information2">
                    <input style="box-shadow: 0 1px 1px #16181b;" type="file" name="justif_ca" class="file" data-show-upload="true" data-show-caption="true" data-show-preview="true"/>
                </div>

				<div class="form-group col-xl-6">
					<label class="col-form-label" for="budget_temps_realises">Budget temps réalisé
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="budget_temps_realises" t-att-value="budget_temps_realises or ''"
						class="form-control" id="budget_temps_realises" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="temps_passe_associe">Temps passé par l'associé signataire
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="temps_passe_associe" t-att-value="temps_passe_associe or ''"
						class="form-control" id="temps_passe_associe" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="autres_missions_realises">Autres missions réalisées
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="text" name="autres_missions_realises"
						t-att-value="autres_missions_realises or ''" class="form-control"
						id="autres_missions_realises" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="honoraires_autres_mission">Honoraires des autres missions
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="honoraires_autres_mission" t-att-value="honoraires_autres_mission or ''"
						class="form-control" id="honoraires_autres_mission" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="rapport_opinion">Rapport d'opinion
						(KMAD)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="rapport_opinion" t-att-value="rapport_opinion or ''"
						class="form-control" id="rapport_opinion" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="rapport_controle_interne">Rapport de contrôle interne (ou lettre)
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="rapport_controle_interne" t-att-value="rapport_controle_interne or ''"
						class="form-control" id="rapport_controle_interne" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="rapport_detaille_comptes">Rapport détaillé sur les comptes
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="rapport_detaille_comptes" t-att-value="rapport_detaille_comptes or ''"
						class="form-control" id="rapport_detaille_comptes" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="rapport_special">Rapport spécial
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="rapport_special" t-att-value="rapport_special or ''"
						class="form-control" id="rapport_special" t-att-readonly="None if state=='draft' else '1'"/>
				</div>


				<div class="form-group col-xl-6">
					<label class="col-form-label" for="autres_rapports">Autres rapports
					</label>
				</div>
				<div class="form-group col-xl-6">
					<input type="number" name="autres_rapports" t-att-value="autres_rapports or ''"
						class="form-control" id="autres_rapports" t-att-readonly="None if state=='draft' else '1'"/>
				</div>
                
                <div class="form-group col-xl-6" style="display:none;">
					<label class="col-form-label" for="declaration">declaration
					</label>
				</div>
				<div class="form-group col-xl-6" style="display:none;">
					<input type="text" name="declaration" t-att-value="declaration or ''"
						class="form-control" id="declaration" />
				</div>
				
				<div class="form-group col-xl-6" style="display:none;">
					<label class="col-form-label" for="mandat">mandat
					</label>
				</div>
				<div class="form-group col-xl-6" style="display:none;">
					<input type="text" name="mandat" t-att-value="mandat or ''"
						class="form-control" id="mandat" />
				</div>
                
                <div class="form-group col-xl-6" style="display:none;">
					<label class="col-form-label" for="id">id
					</label>
				</div>
				<div class="form-group col-xl-6" style="display:none;">
					<input type="text" name="id" t-att-value="id or ''"
						class="form-control" id="id" />
				</div>
				
				<div class="form-group col-xl-6" style="display:none;">
					<label class="col-form-label" for="declaration_id">id
					</label>
				</div>
				<div class="form-group col-xl-6" style="display:none;">
					<input type="text" name="declaration_id" t-att-value="declaration_id or ''"
						class="form-control" id="declaration_id" />
				</div>
				
			</div>
			
			<div class="row" id="report_submit">
				<div class="col-lg-12 text-center mt32 mb32">
					<t t-if="state == 'draft'"><button type="submit" class="btn btn-primary float-left mb3">Enregistrer</button></t>
					<t t-if="mandat and state == 'draft'"><a t-attf-href="/declaration/#{slug(declaration)}/mandat/#{slug(mandat)}/delete" class="btn btn-primary float-right mb32">Supprimer</a></t>
				</div>
			</div>
		</form>
	</t>
	</template>


</odoo>
