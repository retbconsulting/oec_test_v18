<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Adjust external layout -->
        <template id="oec_custom_external_layout" inherit_id="web.external_layout_bubble">
            <xpath expr="//div[@name='company_address']/parent::*" position="attributes">
                <attribute name="class">d-flex justify-content-center</attribute>
            </xpath>
            <xpath expr="//div[@name='company_address']" position="replace">

            </xpath>
        </template>

        <template id="report_cotisation_payment_receipt">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="oe_structure"/>
                            <div class="row">
                                <div class="col-12 text-center">
                                    <h2>ROYAUME DU MAROC</h2>
                                    <h3>ORDRE DES EXPERTS COMPTABLES</h3>
                                    <p>(régi par la loi 15/89 promulguée par le Dahir n° 1-92-139 du 14 rajeb 1413 (08 janvier 1993))</p>
                                    <h3>CONSEIL REGIONAL DE CASABLANCA</h3>
                                    <h3>Régions du Centre</h3>
                                </div>
                            </div>
                            <div class="row mt32">
                                <div class="col-12 text-center">
                                    <h3 t-esc="'REÇU N° RP'+ '%0*d' % (8, o.id)"/>
                                </div>
                            </div>
                            <div class="row mt32 justify-content-center">
                                <div class="col-2">De :</div>
                                <div class="col-10">
                                    <span t-field="o.partner_id"/>
                                </div>
                            </div>
                            <div class="row mt16 justify-content-center">
                                <div class="col-2">La somme de :</div>
                                <div class="col-10">
                                    <span t-field="o.total"/> Dirhams
                                </div>
                            </div>
                            <div class="row mt16 justify-content-center">
                                <div class="col-2">Réglée par :</div>
                                <div class="col-10">
                                    <span t-field="o.modalite_payment"/>
                                </div>
                            </div>
                            <div class="row mt32 justify-content-center">
                                <div class="col-12">
                                    <p>A titre de la cotisation pour l'année 2025.</p>
                                </div>
                            </div>
                            <br/>
                            <div class="row justify-content-center gap-3">
                                <div class="text-start col-4" style="position: fixed; left: 20;">
                                    <p>- Quote-part fixe PP</p>
                                    <p>- Quote-part fixe PM</p>
                                    <p>- Quote-part variable</p>
                                    <p>- Cotisation fixe par mandat</p>
                                    <p>- Cotisation fixe de l'IFOEC</p>
                                </div>
                                <div class="col-4 text-end">
                                    <p><span t-field="o.total_g"/> DH</p>
                                    <p><span t-field="o.total_g_2"/> DH</p>
                                    <p><span t-field="o.total_h"/> DH</p>
                                    <p><span t-field="o.total_i"/> DH</p>
                                    <p><span t-field="o.total_j"/> DH</p>
                                </div>
                            </div>
                            <br/>
                            <div class="row mt16 justify-content-center gap-3">
                                <div class="col-4" style="position: fixed; left: 30;">
                                    <b>Total à payer</b>
                                </div>
                                <div class="col-4 text-end">
                                    <span t-field="o.total"/> DH
                                </div>
                            </div>
                            <div class="row mt32 justify-content-center">
                                <div class="col-12 text-right">
                                    Casablanca, le <span t-field="o.payment_validation_date"/>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <div class="row mt16 justify-content-center" style="position: fixed; right: 100px;">
                                <div class="col-12 text-end">
                                    <p>Conseil Régional de l'Ordre des Experts</p>
                                    <p>Comptables de Casablanca &amp; Centre</p>
                                </div>
                            </div>
                            <div class="oe_structure justify-content-center"/>
                        </div>
                    </t>
                </t>    
            </t>
        </template>

        
        <record id="action_custom_report_template_paiement" model="ir.actions.report">
            <field name="name">Reçu de paiement</field>
            <field name="model">oec.cotisation</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">mandat_cotisation_management.report_cotisation_payment_receipt</field>
            <field name="report_file">mandat_cotisation_management.paiement_receipt</field>
            <field name="binding_model_id" ref="mandat_cotisation_management.model_oec_cotisation"/>
            <field name="binding_type">report</field>
        </record>

    </data>

</odoo>
