<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="report_cotisation_view">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.external_layout">
                        <div class="page" style="page-break-after: always;">
                            <h1 style="text-align: center; font-weight: 500; color: #612121"> BORDEREAU DE COTISATION </h1>
                            <br/>
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> Identification du Cabinet </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Année</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.year"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Date d'inscription</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.partner_id.date_inscription"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Nom et prénom</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.partner_id.name"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Siège social</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-esc="o.partner_id.street if not o.partner_id.parent_id else o.partner_id.parent_id.street"/></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/>
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> Cotisation Fixe </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="2" class="border-0"><strong style="font-size: 18px;">Personne Morale:</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Montant cotisation hors remise</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.amount_member_c"/><span> DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Taux de remise</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.discount"/></td>
                                    </tr>
                                    <tr>
                                        <td colspan="2" class="border-0"><strong style="font-size: 18px;">Personnes Physiques:</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Nombre de membres non exonérés</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.number_members_2"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Nombre de membres bénéficiares de 50% de remise</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.number_members_50"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Nombre de membres exonérés</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.number_members_exo"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Montant par membre de l'ordre (E)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.amount_member_2"/><span> DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Sous total (D*E) = (F)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total_f"/><span> DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Total cotisation fixe (G)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total_g if o.partner_id.mode_registration != 'pm' else o.total_g_2"/><span> DH</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="page" style="page-break-after: always;">
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> COTISATION FIXE DE 1000 DH PAR BUREAU SECONDAIRE </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Nombre de bureaux secondaires</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.s_office_number"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Cotisation fixe par bureau secondaire</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span>1000,0 DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Total cotisation fixe des bureaux secondaires</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total_i2"/><span> DH</span></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/>
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> COTISATION VARIABLE </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Chiffre d'affaires</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.ca"/><span> DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Total cotisation variable (H)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total_h"/><span> DH</span></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/>
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> COTISATION FIXE DE 200 DH PAR MANDAT DE CAC ET/OU D'AUDIT </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Nombre de mandat</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.mandat_number"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Cotisation fixe par mandat</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span>200,0 DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Total cotisation fixe de CAC et/ou audit (I)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total_i"/><span> DH</span></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/>
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> COTISATION IFOEC </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Membres non exonérés</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-esc="o.number_members_2 + o.number_members_50"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Membres exonérés</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.number_members_exo"/></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Montant par membre</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span>1500,0 DH</span></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Total cotisation IFOEC (J)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total_j"/><span> DH</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="page" style="page-break-after: always;">
                            <table class="table table-borderless">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> Total à Payer </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Total à payer (G) + (H) + (I1) + (I2) + (J)</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.total"/><span> DH</span></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/>
                            <table class="table table-borderless" t-if="o.state in ('payment_submitted', 'payment_validated', 'comptabilise')">
                                <thead>
                                    <th colspan="2" style="background-color: #FF8888; border-top-left-radius: 10px;"> Paiement </th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-0" style="width: 60%;">Modalité de paiement</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.modalite_payment"/></td>
                                    </tr>
                                    <tr t-if="o.modalite_payment == 'cheque'">
                                        <td class="border-0">Numéro de chèque</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.numero_cheque"/></td>
                                    </tr>
                                    <tr t-if="o.modalite_payment == 'cheque'">
                                        <td class="border-0">Montant du chèque</td>
                                        <td style="border: 1px solid #ddd; text-align: right;"><span t-field="o.amount_cheque"/></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/>
                            <br/>

                            <!-- Signature -->
                            <p style="position: fixed; right: 100px;">
                                Fait à Casablanca
                                <br/> 
                                le <span t-esc="datetime.datetime.now().date()"/>
                                <br/>
                                <br/>
                                Cachet et signature
                            </p>

                        </div>
                    </t>
                </t>
            </t>
        </template>

        
        <record id="action_custom_report_template_cotisation" model="ir.actions.report">
            <field name="name">BORDEREAU DE COTISATION</field>
            <field name="model">oec.cotisation</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">mandat_cotisation_management.report_cotisation_view</field>
            <field name="report_file">mandat_cotisation_management.cotisation_report</field>
            <field name="binding_model_id" ref="mandat_cotisation_management.model_oec_cotisation"/>
            <field name="binding_type">report</field>
        </record>

    </data>

</odoo>
